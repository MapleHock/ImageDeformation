# 数值分析第一次大作业 图像变形

## 程序运行所需的环境、库
本程序在Windows 10 版本号1903环境下测试可以运行。若要进行编译，在visual studio 2017IDE和.net Core 4.0环境下可进行编译。除了该版本的.net Core标准库外，程序不需要其他的第三方库

## 程序操作说明
程序面板的右侧为主要的用户交互面板。  

进入程序后，点击右下方的打开待处理图片按钮，在弹出对话框中选择你想处理的图片，它即会在最左侧的原图显示框中显示。之后你可以在右下侧的按钮组中选择你想要的图像变形方法，包含扭曲变形，图像畸变和TPS，在下拉框中选择生成变形图像时所使用的插值方法。选中变形方法后，上侧的参数输入栏会对应的变为可用状态，并且为你预置好了变形参数。

当然，你也可以选择用自己想要的输入参数覆盖掉这些自动填入的参数。当变形参数确定后，点击右下方的运行处理按钮，即可得到对应的变形结果。变形后的图片将显示在原图框的右侧以供对照。若你对变形的结果满意，想要留一份存档，可以点击右下方的保存处理后图片，选择你想保存的路径和文件名，即可将变形结果保存

## 文件结构说明

首先是整个文件夹下所有文件的目录式说明

---
|-- README.md                                   // 本文件，用于说明程序运行所需的环境、库，程序操作说明和文件结构
|-- Exe                                         // 文件夹，内含可执行程序和必要的数据集以及部分预置的测试结果)
|-- 2017010910_吴文绪_数值分析第一次大作业.pdf    // 报告
|-- ImageDeformater.sln                         // vs工程文件入口
|-- ImageDeformater                             // 源代码
    |-- Properties                              // 存放资源文件的文件夹，工程配置时自动生成未作修改
    |-- App.config                              // 程序的xaml配置文件，工程配置时自动生成未作修改
    |-- App.xaml                                // 程序的xaml映像，工程配置时自动生成未作修改
    |-- App.xaml.cs                             // App.xaml对应的C#镜像，工程配置时自动生成未作修改
    |-- ImageDeformater.csproj                  // C#工程文件，工程配置时自动生成未作修改
    |-- MainWindow.xaml                         // 程序前端的界面描述文件
    |-- MainWindow.xaml.cs                      // 程序前端界面的交互逻辑，包含界面动态变化逻辑，简单的输入参数检测和对后端代码的调用
    |-- Utilities.cs                            // 程序后端主要文件，包含了坐标变换、插值、Bitmap类和btye数组的互化等功能

---



在编写程序时我尽量做到逻辑和物理上的前后端分离。如上文所述，其中Utilities.cs文件中为有静态类Utilities，它提供了程序主要的后端函数，包含坐标变换、插值、Bitmap类和btye数组的互化等功能。而MainWindow.xaml和MainWindow.xaml.cs主要书写前端，前者描述页面，后者处理包括传参、显示等简单的前端逻辑。

程序核心文件Utilities.cs文件又分为几个区块，并已经用注释进行分界

1. 静态数据，存储原图目标图的btye数组表达和Bitmap类表达，以及TPS的点对
2. 插值方法：包含最近邻插值、双线性插值、双三次插值、快速双三次插值
3. (串行的)坐标变换方法：包含旋转扭曲、图像畸变、TPS以及它们所需要的辅助函数，如径向基函数和高斯消元
4. 并行版本的坐标变换方法